{
  "uid" : "3b23e8c81919ac36",
  "name" : "test_get_test_intent",
  "fullName" : "pytest.api.test_get_intent.TestIntent#test_get_test_intent",
  "historyId" : "3f93578ac7f29b8312725488095d68eb",
  "time" : {
    "start" : 1586762684288,
    "stop" : 1586762689325,
    "duration" : 5037
  },
  "status" : "broken",
  "statusMessage" : "UnboundLocalError: local variable 're_intent' referenced before assignment",
  "statusTrace" : "self = <test_get_intent.TestIntent object at 0x0000028439826A20>\n\n    @pytest.mark.intenttest\n    @allure.feature(\"意图识别\")\n    def test_get_test_intent(self):\n        # GetIntent.get_intent(self, \"intent_tag.txt\", \"意图识别.csv\", \"intent_test_result.xls\")\n        GetIntent.get_intent(self, \"http://192.168.1.18:30098/andrology_intent/v2?sentence={}\", \"intent_tag.txt\",\n                                  \"意图识别.csv\",\n>                                 \"intent_test_result.xls\")\n\napi\\test_get_intent.py:29: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <test_get_intent.TestIntent object at 0x0000028439826A20>\napi_url = 'http://192.168.1.18:30098/andrology_intent/v2?sentence={}'\ntarget_file = 'intent_tag.txt', test_data_file = '意图识别.csv'\nresult_file = 'intent_test_result.xls'\n\n    def get_intent(self, api_url, target_file, test_data_file, result_file):\n        \"\"\"\n        通过抽取测试集的数据，调用意图接口，得出的测试结果，在调用函数获取每个target的准确率，召回率，F1\n        :param target_file: 储存target的文件\n        :param data_file: 储存接口结果数据的文件\n        \"\"\"\n        # 获取测试集的data\n        test_data = ChangeDataType.csv_to_dict(rootPath + \"\\\\testdata\\\\apidata\\\\\" + test_data_file)\n        score_list = []\n        re_intent_list = []\n        exp_intent_list = []\n        tf_list = []\n        # 循环读取sentence，intent\n        for idx, temp in test_data.iterrows():\n            intent = temp[\"intention\"]\n            sentence = temp[\"sentence\"]\n            url = api_url.format(sentence)  # 接口请求\n            try:\n                r = requests.get(url, timeout=50)\n                result = r.json()\n                re_intent = result[\"data\"][\"intent\"]  # 获取返回data的intent\n                # print(re_intent)\n                score = result[\"data\"][\"score\"]  # 获取返回data的score\n                tf = CommonFunction.get_tf(intent, re_intent)\n            except Exception as e:\n                score = \"bad request\"\n                # print(e)\n            # self.logging.info(\"句子：\" + sentence + \"---预期意图：\" + intent\n            #                   + \"---实际意图：\" + re_intent + \"---是否一致：\" + tf)\n            # 拼接结果数据\n            score_list.append(score)\n            exp_intent_list.append(intent)\n>           re_intent_list.append(re_intent)\nE           UnboundLocalError: local variable 're_intent' referenced before assignment\n\n..\\api\\get_intent.py:97: UnboundLocalError",
  "flaky" : false,
  "beforeStages" : [ ],
  "afterStages" : [ ],
  "labels" : [ {
    "name" : "feature",
    "value" : "意图识别"
  }, {
    "name" : "tag",
    "value" : "intenttest"
  }, {
    "name" : "parentSuite",
    "value" : "pytest.api"
  }, {
    "name" : "suite",
    "value" : "test_get_intent"
  }, {
    "name" : "subSuite",
    "value" : "TestIntent"
  }, {
    "name" : "host",
    "value" : "WIN-OQ20V7UABJF"
  }, {
    "name" : "thread",
    "value" : "25052-MainThread"
  }, {
    "name" : "framework",
    "value" : "pytest"
  }, {
    "name" : "language",
    "value" : "cpython3"
  }, {
    "name" : "package",
    "value" : "pytest.api.test_get_intent"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ ],
  "links" : [ ],
  "hidden" : true,
  "retry" : true,
  "extra" : {
    "categories" : [ ],
    "tags" : [ "intenttest" ]
  },
  "source" : "3b23e8c81919ac36.json",
  "parameterValues" : [ ]
}